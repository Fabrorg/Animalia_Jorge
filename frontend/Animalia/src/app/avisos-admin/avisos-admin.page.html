<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Administración de Avisos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Administración de Avisos</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="buscador-wrapper">
    <ion-item class="buscador-item" lines="none">
      <ion-icon name="search-outline" slot="start" class="buscador-icon"></ion-icon>
      <ion-input
        [(ngModel)]="filtroNombre"
        placeholder="Buscar Nombre de Mascota"
        class="buscador-input"
        clearInput>
      </ion-input>
    </ion-item>
  </div>

  <ion-list>
    <ion-item *ngFor="let aviso of getAvisosFiltrados()">
      <ion-card class="aviso-card">
        <ion-card-header>
          <div class="card-header-content">
            <div>
              <ion-card-title>{{ aviso.nombre }}</ion-card-title>
              <ion-card-subtitle>{{ aviso.estado }}</ion-card-subtitle>
            </div>
            <ion-button 
              fill="clear" 
              color="danger" 
              (click)="eliminarAviso(aviso.id!)"
              class="delete-button">
              <ion-icon name="trash-outline"></ion-icon>
            </ion-button>
          </div>
        </ion-card-header>

        <ion-card-content>
          <div style="display: flex; align-items: center; justify-content: center;">
            <img *ngIf="aviso.foto" [src]="aviso.foto" class="aviso-imagen" alt="Imagen del aviso"/>
          </div>
          
          <ion-list>
            <ion-item>
              <ion-label>
                <h3>Propietario</h3>
                <p>{{ aviso.especie }}</p>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-label>
                <h3>Tipo de Animal</h3>
                <p>{{ aviso.raza }}</p>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-label>
                <h3>Descripción</h3>
                <p>{{ aviso.descripcion }}</p>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-label (click)="copiarTelefono(aviso.telefono)">
                <h3>Teléfono</h3>
                <p>{{ aviso.telefono }}</p>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-label>
                <h3>Ubicación</h3>
                <p>{{ aviso.ubicacion }}</p>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-label>
                <h3>Fecha del aviso</h3>
                <p>{{ aviso.fecha_aviso | date:'dd/MM/yyyy' }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </ion-item>
  </ion-list>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="avisos.length === 0" class="no-avisos">
    <p>No hay avisos disponibles en este momento.</p>
  </div>
</ion-content>
